<div class="container" *ngIf="producto">
  <!-- ðŸ–¼ Imagen -->
  <div class="left">
    <div class="image-container">
      <img [src]="selectedVariante?.imagen || producto.imagen" class="card-img-top" [alt]="producto.descripcion" />
    </div>
  </div>

  <!-- ðŸ“‹ Detalle -->
  <div class="right">
    <h3>{{ producto.descripcion }}</h3>
    <h5>{{ producto.subdescripcion }}</h5>

    <p *ngIf="producto.marca" class="text-muted">Marca: {{ producto.marca }}</p>

    <!-- ðŸ”¹ Precio -->
    <div class="precios">
      <ng-container *ngIf="esMayorista; else vistaMinorista">
        <h3>{{ selectedVariante?.precioMayorista || producto.precioMayorista | currency }}</h3>
      </ng-container>

      <ng-template #vistaMinorista>
        <div *ngIf="producto.oferta; else sinOferta">
          <h3 class="text-danger">{{ producto.precioOferta | currency }}</h3>
          <del>{{ producto.precioMinorista | currency }}</del>
        </div>
        <ng-template #sinOferta>
          <h3>{{ producto.precioMinorista | currency }}</h3>
        </ng-template>
      </ng-template>
    </div>

    <!-- ðŸŽ¨ Variantes -->
        <div *ngIf="producto.variantes?.length > 0" class="mt-3">
       
            <div *ngIf="producto.tipoVariantes === 'modelo+color'" class="mb-3">
           
                <div class="modelos-container">
                    <button *ngFor="let modelo of modelosUnicos" class="btn btn-outline-primary btn-sm"
                        (click)="seleccionarModelo(modelo)" [class.active]="modeloSeleccionado === modelo">
                        {{ modelo }}
                    </button>
                </div>
            </div>

         
            <div *ngIf="producto.tipoVariantes === 'color' || producto.tipoVariantes === 'modelo+color'">
         
                <div *ngIf="coloresFiltrados?.length > 0; else sinColores" class="d-flex flex-wrap gap-2 mt-2 colores-container">
                    <div *ngFor="let variante of coloresFiltrados" class="d-flex align-items-center gap-2 color-wrapper">
                        <div class="color-option" [title]="variante.color || '(sin color)'"
                            [ngStyle]="{ 'background-color': (variante.color || '#ddd') }"
                            (click)="seleccionarVariante(variante)" [class.selected]="selectedVariante === variante"
                            style="width:28px;height:28px;border-radius:50%;border:1px solid #999;cursor:pointer">
                        </div>
                   
                    </div>
                </div>


                <ng-template #sinColores>
                    <div class="text-muted small mt-2">
                        <em>Seleccione un modelo para ver los colores</em>
                    </div>
                </ng-template>
            </div>


        </div>

    <!-- <div *ngIf="producto.tipoVariantes === 'color' || modeloSeleccionado">
      <h5>Colores</h5>
      <div class="d-flex flex-wrap gap-2 mt-2">
        <div *ngFor="let variante of coloresFiltrados"
             class="color-option"
             [ngStyle]="{ 'background-color': variante.color }"
             (click)="seleccionarVariante(variante)"
             [class.selected]="selectedVariante === variante"
             style="width:30px;height:30px;border-radius:50%;cursor:pointer;border:1px solid #999">
        </div>
      </div>
    </div> -->

    <!-- ðŸ›’ BotÃ³n carrito -->
    <div class="carrito mt-4">
      <button (click)="disminuirCantidad()">-</button>
      <input type="text" [(ngModel)]="cantidad" readonly />
      <button (click)="aumentarCantidad()">+</button>

      <button class="agregar-carrito" (click)="cargaCarrito(producto)">
        AGREGAR AL CARRITO
      </button>
    </div>
  </div>
</div>
