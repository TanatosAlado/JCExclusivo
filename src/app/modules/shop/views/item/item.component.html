<div class="product-item bg-light mb-4">
  <div class="product-img position-relative overflow-hidden">
    <img
      class="img-fluid w-100"
      [src]="producto.imagen ? producto.imagen : '../../../../../assets/imagenes/No disponible.png'"
      alt="Imagen producto"
    />
    <div class="product-action">
      <a (click)="agregarCarrito(producto)"><i class="fa fa-shopping-cart"></i></a>
      <a (click)="verDetalle(producto)"><i class="fa fa-search"></i></a>
    </div>
  </div>

  <div class="text-center py-4">
    <!-- DescripciÃ³n -->
    <a class="h6 text-decoration-none text-truncate" href="">
      {{ producto.descripcion }}
    </a>

    <!-- Vista para MAYORISTA -->
    <ng-container *ngIf="esMayorista; else vistaMinorista">
      <div class="d-flex align-items-center justify-content-center mt-2">
        <h5>{{ producto.precioMayorista | currency }}</h5>
      </div>
    </ng-container>

    <!-- Vista para MINORISTA -->
    <ng-template #vistaMinorista>
      <div class="d-flex align-items-center justify-content-center mt-2">
        <!-- Si estÃ¡ en oferta -->
        <h5 *ngIf="producto.oferta">
          {{ producto.precioOferta | currency }}
        </h5>
        <h6 *ngIf="producto.oferta" class="text-muted ms-2">
          <del>{{ producto.precioMinorista | currency }}</del>
        </h6>

        <!-- Si no estÃ¡ en oferta -->
        <h5 *ngIf="!producto.oferta">
          {{ producto.precioMinorista | currency }}
        </h5>
      </div>

      <!-- Impuestos nacionales -->
      <div class="small text-muted">
        Precio sin impuestos: {{ producto.precioSinImpuestos | currency }}
      </div>
    </ng-template>

    <!-- ðŸŽ¨ Colores disponibles (color principal + variantes) -->
    <div class="color-options mt-3 d-flex justify-content-center gap-2">
      <!-- ðŸ”¹ Color principal -->
      <div
        class="color-circle border border-dark"
        [ngStyle]="{ 'background-color': producto.color || '#ccc' }"
        [attr.title]="'Color principal'"
      ></div>

      <!-- ðŸ”¹ Variantes -->
      <div
        *ngFor="let variante of producto.variantes"
        class="color-circle"
        [ngStyle]="{ 'background-color': variante.color || '#ccc' }"
        [attr.title]="variante.color"
      ></div>
    </div>
  </div>
</div>
