<div class="product-item bg-light mb-4">
    <!-- 游뒆 Imagen principal -->
    <div class="product-img position-relative overflow-hidden">
        <img class="img-fluid w-100" [src]="
        selectedVariante?.imagen ||
        producto.imagen ||
        '../../../../../assets/imagenes/No disponible.png'
      " alt="Imagen producto" />

<div class="product-action">
  <!-- Mostrar bot칩n de carrito solo si no tiene variantes -->
  <a *ngIf="producto.tipoVariantes === 'none'; else carritoDeshabilitado"
     (click)="agregarCarrito(producto)"
     title="Agregar al carrito">
    <i class="fa fa-shopping-cart"></i>
  </a>

  <!-- Template para carrito deshabilitado (mismo 칤cono pero gris y con tooltip) -->
  <ng-template #carritoDeshabilitado>
    <a class="disabled" title="Producto con variantes. Abr칤 el detalle para seleccionar la variante">
      <i class="fa fa-shopping-cart"></i>
    </a>
  </ng-template>

  <!-- Lupa / Ver detalle (si tiene variantes mostramos tooltip que lo indique) -->
  <a (click)="verDetalle(producto)"
     [title]="producto.tipoVariantes && producto.tipoVariantes !== 'none' 
               ? 'Este producto tiene variantes. Abr칤 el detalle para elegir modelo/color.' 
               : 'Ver detalle del producto'">
    <i class="fa fa-search"></i>
  </a>
</div>
    </div>

    <!-- 游 Info del producto -->
    <div class="text-center py-4">
        <!-- Descripci칩n -->
        <a class="h6 text-decoration-none text-truncate" href="">
            {{ producto.descripcion }}
        </a>

        <!-- 游댳 Precios -->
        <ng-container *ngIf="esMayorista; else vistaMinorista">
            <div class="d-flex align-items-center justify-content-center mt-2">
                <h5>
                    {{
                    selectedVariante?.precioMayorista ||
                    producto.precioMayorista | currency
                    }}
                </h5>
            </div>
        </ng-container>

        <ng-template #vistaMinorista>
            <div class="d-flex align-items-center justify-content-center mt-2">
                <!-- Si est치 en oferta -->
                <ng-container *ngIf="selectedVariante?.oferta || producto.oferta; else sinOferta">
                    <h5>
                        {{
                        (selectedVariante?.precioOferta || producto.precioOferta)
                        | currency
                        }}
                    </h5>
                    <h6 class="text-muted ms-2">
                        <del>{{
                            (selectedVariante?.precioMinorista || producto.precioMinorista)
                            | currency
                            }}</del>
                    </h6>
                </ng-container>

                <!-- Si no est치 en oferta -->
                <ng-template #sinOferta>
                    <h5>
                        {{
                        (selectedVariante?.precioMinorista ||
                        producto.precioMinorista) | currency
                        }}
                    </h5>
                </ng-template>
            </div>

            <div class="small text-muted">
                Precio sin impuestos:
                {{ producto.precioSinImpuestos | currency }}
            </div>
        </ng-template>

    </div>
</div>