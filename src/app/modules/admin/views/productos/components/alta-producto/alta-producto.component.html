<div class="imagen-central fadeIn first">
  <img src="../../../../../assets/logo.png" alt="Login" />
</div>

<mat-card class="producto-form-card">
  <mat-card-content>
    <form [formGroup]="productoForm" (ngSubmit)="onSubmit()">

      <!-- Sección básica -->
      <div class="form-grid">
        <mat-form-field appearance="outline" class="form-field fadeIn first">
          <mat-label>Código de Barras</mat-label>
          <input matInput formControlName="codigoBarras" required>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field fadeIn first">
          <mat-label>Rubro</mat-label>
          <input matInput formControlName="rubro">
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field fadeIn second">
          <mat-label>Subrubro</mat-label>
          <input matInput formControlName="subrubro">
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field fadeIn second">
          <mat-label>Marca</mat-label>
          <input matInput formControlName="marca">
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="form-field full-width fadeIn second">
        <mat-label>Descripción</mat-label>
        <textarea matInput rows="3" formControlName="descripcion"></textarea>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field full-width fadeIn second">
        <mat-label>URL de Imagen</mat-label>
        <input matInput type="url" formControlName="imagen" placeholder="https://...">
      </mat-form-field>

      <!-- Sección precios -->
      <div class="form-grid fadeIn third">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Precio Costo</mat-label>
          <input matInput type="number" formControlName="precioCosto" required>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Precio sin Impuestos</mat-label>
          <input matInput type="number" formControlName="precioSinImpuestos" required>
        </mat-form-field>

        <mat-checkbox formControlName="ventaMinorista">¿Se vende en Minorista?</mat-checkbox>
        <mat-form-field appearance="outline" class="form-field" *ngIf="productoForm.get('ventaMinorista')?.value">
          <mat-label>Precio Minorista</mat-label>
          <input matInput type="number" formControlName="precioMinorista">
        </mat-form-field>

        <mat-checkbox formControlName="ventaMayorista">¿Se vende en Mayorista?</mat-checkbox>
        <mat-form-field appearance="outline" class="form-field" *ngIf="productoForm.get('ventaMayorista')?.value">
          <mat-label>Precio Mayorista</mat-label>
          <input matInput type="number" formControlName="precioMayorista">
        </mat-form-field>
      </div>

      <!-- Oferta y destacado -->
      <div class="form-grid fadeIn third">
        <mat-checkbox formControlName="oferta">¿Está en oferta?</mat-checkbox>
        <mat-form-field appearance="outline" class="form-field" *ngIf="productoForm.get('oferta')?.value">
          <mat-label>Precio de Oferta</mat-label>
          <input matInput type="number" formControlName="precioOferta">
        </mat-form-field>

        <mat-checkbox formControlName="destacado">¿Es destacado?</mat-checkbox>
      </div>

      <!-- Stock distribuido -->
      <div class="form-grid fadeIn fourth">
        <div formArrayName="stockSucursales" class="full-width">
          <div *ngFor="let stock of productoForm.get('stockSucursales')['controls']; let i = index" [formGroupName]="i"
            class="sucursal-stock">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Stock en {{ sucursales[i]?.nombre }}</mat-label>
              <input matInput type="number" formControlName="cantidad">
            </mat-form-field>
          </div>
        </div>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Stock Mínimo</mat-label>
          <input matInput type="number" formControlName="stockMinimo">
        </mat-form-field>
      </div>

      <!-- Botón Guardar -->
      <div class="acciones fadeIn fou">
        <button mat-raised-button color="primary" type="submit" [disabled]="productoForm.invalid">
          Guardar Producto
        </button>
      </div>

    </form>
  </mat-card-content>
</mat-card>