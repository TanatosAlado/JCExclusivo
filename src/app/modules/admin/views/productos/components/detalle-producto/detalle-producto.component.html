<h2 mat-dialog-title class="titulo-modal">üì¶ Detalle del Producto</h2>

<mat-dialog-content class="contenido-modal">

  <!-- Datos principales -->
  <div class="bloque">
    <p><strong>Descripci√≥n:</strong> {{ producto.descripcion }}</p>
    <p><strong>C√≥digo interno:</strong> {{ producto.codigoBarras }}</p>
    <p><strong>Color principal:</strong>
      <span *ngIf="producto.color" class="color-dot" [ngStyle]="{ 'background-color': producto.color }"></span>
      <span *ngIf="!producto.color">‚Äî</span>
    </p>
  </div>

  <!-- Clasificaci√≥n -->
  <div class="bloque">
    <p><strong>Rubro:</strong> {{ producto.rubro }}</p>
    <p><strong>Subrubro:</strong> {{ producto.subrubro }}</p>
    <p><strong>Marca:</strong> {{ producto.marca }}</p>
  </div>

  <!-- Precios -->
  <div class="bloque precios">
    <p><strong>Precio Minorista:</strong> ${{ producto.precioMinorista }}</p>
    <p *ngIf="producto.precioMayorista > 0">
      <strong>Precio Mayorista:</strong> ${{ producto.precioMayorista }}
    </p>
    <p *ngIf="producto.oferta"><strong>Precio Oferta:</strong> ${{ producto.precioOferta }}</p>
  </div>

  <!-- Stock principal -->
  <div class="bloque">
    <p><strong>Stock total:</strong> {{ getStockTotal(producto) }} unidades</p>


    <p><strong>Stock por sucursal (base):</strong></p>
    <ul>
      <li *ngFor="let stock of producto.stockSucursales">
        üè¨ <strong>{{ obtenerNombreSucursal(stock.sucursalId) }}</strong> ‚Üí {{ stock.cantidad }} unidades
      </li>
    </ul>
    <p><strong>Stock mayorista:</strong> {{ producto.stockMayorista || 0 }}</p>
  </div>

  <!-- Variantes -->
  <div class="bloque" *ngIf="producto.variantes && producto.variantes.length > 0">
    <h3>üé® Variantes por color</h3>
    <div *ngFor="let variante of producto.variantes" class="variante-card">
      <p><strong>Color:</strong> 
  <span class="color-dot" [ngStyle]="{ 'background-color': variante.color }"></span>
</p>

      <p><strong>Stock total:</strong> {{ getStockTotalVariante(variante) }} unidades</p>
      <ul>
        <li *ngFor="let stock of variante.stockSucursales">
          üè¨ <strong>{{ obtenerNombreSucursal(stock.sucursalId) }}</strong> ‚Üí {{ stock.cantidad }} unidades
        </li>
      </ul>
      <p><strong>Stock mayorista:</strong> {{ variante.stockMayorista }}</p>
    </div>
  </div>

  <!-- Flags -->
  <div class="bloque">
    <p><strong>Destacado:</strong> {{ producto.destacado ? 'S√≠' : 'No' }}</p>
    <p><strong>Oferta:</strong> {{ producto.oferta ? 'S√≠' : 'No' }}</p>
    <p><strong>Impuesto Nacional:</strong> {{ producto.precioSinImpuestos ? 'S√≠' : 'No' }}</p>
    <p *ngIf="producto.precioSinImpuestos">
      <strong>Precio sin Impuesto Nacional:</strong> ${{ producto.precioSinImpuestos }}
    </p>
  </div>

  <!-- Imagen -->
  <div *ngIf="producto.imagen" class="product-img">
    <img [src]="producto.imagen" alt="Imagen del producto" />
  </div>

</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close color="primary">Cerrar</button>
</mat-dialog-actions>
