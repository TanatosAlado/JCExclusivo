<div class="container mt-5">
  <div class="tabla-container">
    <div class="button-container">
      <button mat-raised-button class="boton-nuevo" (click)="abrirModalAltaOrden()">Nuevo</button>
    </div>
    <div class="tabs-container">
      <div class="tabs">
        <div class="tab" (click)="setPaginator(1)" [class.active]="activeTab === 1" (click)="activeTab = 1">Ordenes
          Pendientes
        </div>
        <div class="tab" (click)="setPaginator(2)" [class.active]="activeTab === 2" (click)="activeTab = 2">Ordenes
          Finalizadas
        </div>
        <div class="tab" (click)="setPaginator(3)" [class.active]="activeTab === 3" (click)="activeTab = 3">Ordenes
          Eliminadas
        </div>
      </div>

      <div class="tab-content">
        <div *ngIf="activeTab === 1" class="content">
          <div class="table-container">
            <input class="search-input" (keyup)="applyFilter($event, datasourceOrdenesPendientes)"
              placeholder="Buscar órdenes Pendientes" #input>

            <div class="tabla-scroll">
              <table mat-table [dataSource]="datasourceOrdenesPendientes" class="mat-elevation-z8" style="width: 100%;">

                <!-- Número de Orden -->
                <ng-container matColumnDef="numeroOrden">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Nº Orden </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.numeroOrden}} </td>
                </ng-container>

                <!-- Cliente -->
                <ng-container matColumnDef="cliente">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Cliente </th>
                  <td mat-cell *matCellDef="let orden">
                    {{orden.nombreCliente}} {{orden.apellidoCliente}} <br>
                    <small>{{orden.telefonoCliente}}</small>
                  </td>
                </ng-container>

                <!-- IMEI -->
                <ng-container matColumnDef="imei">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> IMEI </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.imei}} </td>
                </ng-container>

                <!-- Equipo -->
                <ng-container matColumnDef="equipo">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Equipo </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.equipo}} </td>
                </ng-container>

                <!-- Estado -->
                <ng-container matColumnDef="estado">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Estado </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.estado}} </td>
                </ng-container>

                <!-- Fecha Ingreso -->
                <ng-container matColumnDef="fechaIngreso">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Ingreso </th>
                  <td mat-cell *matCellDef="let orden"> {{ orden.fechaIngreso?.toDate() | date:'dd/MM/yyyy' }} </td>
                </ng-container>

                <!-- Acciones -->
                <ng-container matColumnDef="acciones">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Acciones </th>
                  <td mat-cell *matCellDef="let orden">
                    <a (click)="moverDocumento(orden.id,'Ordenes Pendientes','Ordenes Finalizadas')"
                      class="pointer" title="Finalizar Orden">
                      <i class="fa-solid fa-circle-check"></i>
                    </a>
                    <a class="pointer" title="Ver Orden" (click)="verOrden(orden)">
                      <i class="fa-solid fa-eye"></i>
                    </a>
                    <a class="pointer" title="Editar Orden" (click)="editarOrden(orden)">
                      <i class="fa-solid fa-pen"></i>
                    </a>
                    <a (click)="openConfirmDialog(orden.id,'Ordenes Pendientes')" class="pointer"
                      title="Eliminar Orden">
                      <i class="fa-solid fa-trash"></i>
                    </a>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
          </div>
          <div class="paginator-container">
            <mat-paginator #paginatorOrdenesPendientes [pageSizeOptions]="[5, 10, 20]" [pageSize]="10"
              showFirstLastButtons></mat-paginator>
          </div>
        </div>
        <div *ngIf="activeTab === 2" class="content">
          <div class="table-container">
            <input class="search-input" (keyup)="applyFilter($event, datasourceOrdenesFinalizadas)"
              placeholder="Buscar órdenes Finalizadas" #input>

            <div class="tabla-scroll">
              <table mat-table [dataSource]="datasourceOrdenesFinalizadas" class="mat-elevation-z8"
                style="width: 100%;">

                <!-- Número de Orden -->
                <ng-container matColumnDef="numeroOrden">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Nº Orden </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.numeroOrden}} </td>
                </ng-container>

                <!-- Cliente -->
                <ng-container matColumnDef="cliente">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Cliente </th>
                  <td mat-cell *matCellDef="let orden">
                    {{orden.nombreCliente}} {{orden.apellidoCliente}} <br>
                    <small>{{orden.telefonoCliente}}</small>
                  </td>
                </ng-container>

                <!-- IMEI -->
                <ng-container matColumnDef="imei">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> IMEI </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.imei}} </td>
                </ng-container>

                <!-- Equipo -->
                <ng-container matColumnDef="equipo">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Equipo </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.equipo}} </td>
                </ng-container>

                <!-- Estado -->
                <ng-container matColumnDef="estado">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Estado </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.estado}} </td>
                </ng-container>

                <!-- Fecha Ingreso -->
                <ng-container matColumnDef="fechaIngreso">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Ingreso </th>
                  <td mat-cell *matCellDef="let orden"> {{ orden.fechaIngreso?.toDate() | date:'dd/MM/yyyy' }} </td>
                </ng-container>

                <!-- Acciones -->
                <ng-container matColumnDef="acciones">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Acciones </th>
                  <td mat-cell *matCellDef="let orden">
                    <a class="pointer" title="Ver Orden" (click)="verOrden(orden)">
                      <i class="fa-solid fa-eye"></i>
                    </a>
                    <a (click)="this.moverDocumento(orden.id,'Ordenes Finalizadas','Ordenes Pendientes')"
                      class="pointer" title="Pasar a Pendiente">
                      <i class="fa-solid fa-hourglass-half"></i>
                    </a>
                    <a (click)="openConfirmDialog(orden.id,'Ordenes Finalizadas')" class="pointer"
                      title="Eliminar Orden">
                      <i class="fa-solid fa-trash"></i>
                    </a>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
          </div>

          <div class="paginator-container">
            <mat-paginator #paginatorOrdenesFinalizadas [pageSizeOptions]="[5, 10, 20]" [pageSize]="10"
              showFirstLastButtons></mat-paginator>
          </div>
        </div>
        <div *ngIf="activeTab === 3" class="content">
          <div class="table-container">
            <input class="search-input" (keyup)="applyFilter($event, datasourceOrdenesEliminadas)"
              placeholder="Buscar órdenes Eliminadas" #input>

            <div class="tabla-scroll">
              <table mat-table [dataSource]="datasourceOrdenesEliminadas" class="mat-elevation-z8" style="width: 100%;">

                <!-- Número de Orden -->
                <ng-container matColumnDef="numeroOrden">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Nº Orden </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.numeroOrden}} </td>
                </ng-container>

                <!-- Cliente -->
                <ng-container matColumnDef="cliente">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Cliente </th>
                  <td mat-cell *matCellDef="let orden">
                    {{orden.nombreCliente}} {{orden.apellidoCliente}} <br>
                    <small>{{orden.telefonoCliente}}</small>
                  </td>
                </ng-container>

                <!-- IMEI -->
                <ng-container matColumnDef="imei">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> IMEI </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.imei}} </td>
                </ng-container>

                <!-- Equipo -->
                <ng-container matColumnDef="equipo">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Equipo </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.equipo}} </td>
                </ng-container>

                <!-- Estado -->
                <ng-container matColumnDef="estado">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Estado </th>
                  <td mat-cell *matCellDef="let orden"> {{orden.estado}} </td>
                </ng-container>

                <!-- Fecha Ingreso -->
                <ng-container matColumnDef="fechaIngreso">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Ingreso </th>
                  <td mat-cell *matCellDef="let orden"> {{ orden.fechaIngreso?.toDate() | date:'dd/MM/yyyy' }} </td>
                </ng-container>

                <!-- Acciones -->
                <ng-container matColumnDef="acciones">
                  <th mat-header-cell *matHeaderCellDef class="cabecera"> Acciones </th>
                  <td mat-cell *matCellDef="let orden">
                    <a class="pointer" title="Ver Orden" (click)="verOrden(orden)">
                      <i class="fa-solid fa-eye"></i>
                    </a>
                    <a (click)="moverDocumento(orden.id,'Ordenes Eliminadas','Ordenes Pendientes')"
                      class="pointer" title="Pasar a Pendiente">
                      <i class="fa-solid fa-hourglass-half"></i>
                    </a>
                    <a (click)="openConfirmDialog(orden.id,'Ordenes Eliminadas')" class="pointer"
                      title="Eliminar Orden">
                      <i class="fa-solid fa-trash"></i>
                    </a>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
          </div>
          <div class="paginator-container">
            <mat-paginator #paginatorOrdenesEliminadas [pageSizeOptions]="[5, 10, 20]" [pageSize]="10"
              showFirstLastButtons></mat-paginator>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>