<app-encabezado>
  Gestión de Clientes
</app-encabezado>

<div class="container mt-3">
  <div class="mb-3">
    <mat-button-toggle-group [value]="filtro" (change)="onFiltroChange($event.value)" appearance="standard">
      <mat-button-toggle value="todos">Todos</mat-button-toggle>
      <mat-button-toggle value="mayorista">Mayoristas</mat-button-toggle>
      <mat-button-toggle value="minorista">Minoristas</mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  <table mat-table [dataSource]="clientesFiltrados" class="mat-elevation-z2" multiTemplateDataRows>

    <!-- Nombre / Razón Social -->
    <ng-container matColumnDef="nombre">
      <th mat-header-cell *matHeaderCellDef> Nombre / Razón Social </th>
      <td mat-cell *matCellDef="let cliente">
        {{ cliente.esMayorista ? cliente.razonSocial : (cliente.nombre + ' ' + cliente.apellido) }}
      </td>
    </ng-container>

    <!-- Usuario -->
    <ng-container matColumnDef="usuario">
      <th mat-header-cell *matHeaderCellDef> Usuario </th>
      <td mat-cell *matCellDef="let cliente"> {{ cliente.usuario }} </td>
    </ng-container>

    <!-- Email -->
    <ng-container matColumnDef="mail">
      <th mat-header-cell *matHeaderCellDef> Email </th>
      <td mat-cell *matCellDef="let cliente"> {{ cliente.mail }} </td>
    </ng-container>

    <!-- Teléfono -->
    <ng-container matColumnDef="telefono">
      <th mat-header-cell *matHeaderCellDef> Teléfono </th>
      <td mat-cell *matCellDef="let cliente"> {{ cliente.telefono }} </td>
    </ng-container>

    <!-- Acciones -->
    <ng-container matColumnDef="acciones">
      <th mat-header-cell *matHeaderCellDef> Acciones </th>
      <td mat-cell *matCellDef="let cliente">
        <button mat-icon-button color="primary" (click)="verCliente(cliente)" matTooltip="Ver">
          <mat-icon>visibility</mat-icon>
        </button>
        <button mat-icon-button color="accent" (click)="editarCliente(cliente)" matTooltip="Editar">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="eliminarCliente(cliente)" matTooltip="Eliminar">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <!-- Header y Row -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

</div>